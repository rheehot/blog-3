
<!DOCTYPE html>
<html lang="en">
    

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="아내와 아들 그리고 딸밖에 모르는 남편">
    <title>
        Tag: observer - 아내와 아들 그리고 딸밖에 모르는 남편
    </title>
    <meta name="author" content="sculove">
    
    <meta name="keywords" content="frontend,javascript,developer,">
    
    
    
    <link rel="alternate" type="application/atom+xml" title="RSS" href="/blog/rss2.xml">
    
    <link rel="canonical" href="http://sculove.github.io/blog/tags/observer/">
    <script type="application/ld+json">{}</script>
    <meta name="description" content="FrontEnd 개발자. JavaScript, RxJS, Angular, React 기술 경험 블로그">
<meta name="keywords" content="frontend,javascript,developer">
<meta property="og:type" content="blog">
<meta property="og:title" content="아내와 아들 그리고 딸밖에 모르는 남편">
<meta property="og:url" content="http://sculove.github.io/blog/tags/observer/index.html">
<meta property="og:site_name" content="아내와 아들 그리고 딸밖에 모르는 남편">
<meta property="og:description" content="FrontEnd 개발자. JavaScript, RxJS, Angular, React 기술 경험 블로그">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="아내와 아들 그리고 딸밖에 모르는 남편">
<meta name="twitter:description" content="FrontEnd 개발자. JavaScript, RxJS, Angular, React 기술 경험 블로그">
    
    
    
    
    
    <meta property="og:image" content="http://sculove.github.io/blog/assets/images/sculove.jpeg">
    
    
    
    
    <!--STYLES-->
    <link rel="stylesheet" href="/blog/assets/css/all.css">
    <link rel="stylesheet" href="/blog/assets/css/jquery.fancybox.css">
    <link rel="stylesheet" href="/blog/assets/css/thumbs.css">
    <link rel="stylesheet" href="/blog/assets/css/tranquilpeak.css">
    <!--STYLES END-->
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-37362821-12"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-37362821-12');
    </script>


    
</head>
    <body>
        <div id="blog">
            <!-- Define author's picture -->


<header id="header" data-behavior="1">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a class="header-title-link" href="/blog/ ">아내와 아들 그리고 딸밖에 모르는 남편</a>
    </div>
    
        
            <a class="header-right-icon open-algolia-search" href="#search">
        
        
            <i class="fa fa-search fa-lg"></i>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="1">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a href="/blog/#about">
                    <img class="sidebar-profile-picture" src="/blog/assets/images/sculove.jpeg" alt="Author&#39;s picture">
                </a>
                <h4 class="sidebar-profile-name">sculove</h4>
                
                    <h5 class="sidebar-profile-bio"><p>아내와 아들 그리고 딸밖에 모르는 남편</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/blog/ " title="Home">
                    
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/blog/all-categories" title="Categories">
                    
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Categories</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/blog/all-tags" title="Tags">
                    
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Tags</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="/blog/all-archives" title="Archives">
                    
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Archives</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link open-algolia-search" href="#search" title="Search">
                    
                        <i class="sidebar-button-icon fa fa-search" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Search</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="#about" title="About">
                    
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">About</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="https://github.com/sculove" target="_blank" rel="external nofollow noopener noreferrer" title="GitHub">
                    
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="https://www.facebook.com/chanuk.son" target="_blank" rel="external nofollow noopener noreferrer" title="Facebook">
                    
                        <i class="sidebar-button-icon fab fa-facebook" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Facebook</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="https://kr.linkedin.com/in/chan-uk-son-8989ba56" target="_blank" rel="external nofollow noopener noreferrer" title="LinkedIn">
                    
                        <i class="sidebar-button-icon fab fa-linkedin" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">LinkedIn</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="mailto:sculove@gmail.com" target="_blank" rel="external nofollow noopener noreferrer" title="Mail">
                    
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Mail</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a class="sidebar-button-link " href="https://sculove.github.io/blog/rss2.xml" target="_blank" rel="noopener" title="RSS">
                    
                        <i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="1" class="
                        hasCoverMetaIn
                        ">
                
    <section class="postShorten-group main-content-wrap">
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a class="link-unstyled" href="/blog/2017/07/26/rxjsbook2/">
                            RxJS가 해결하려고했던 문제2 - 상태 전파 문제
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2017-07-26T01:51:20+09:00">
	
		    Jul 26, 2017
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/blog/categories/Tech/">Tech</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <p>오늘 소개할 부분은<br>웹어플리케이션 개발시 발생할 수 있는 <code>상태 전파 문제</code>를 RxJS는 어떻게 접근했는지에 대한 이야기이다.</p>
<hr>
<h2 id="웹어플리케이션의-상태"><a href="#웹어플리케이션의-상태" class="headerlink" title="웹어플리케이션의 상태"></a>웹어플리케이션의 상태</h2><p>우리가 만드는 웹어플리케이션은 하나의 큰 상태 머신이고 이를 구성하고 있는 크고 작은 단위들 또한 하나의 상태머신이다.<br>각각의 상태 머신들은 각자의 상태를 가지고 있고, 상태 머신들은 각자의 역할에 따라 서로 유기적으로 연결되어 있다.</p>
<p>A라는 작은 상태 머신의 상태값은 B의 입력값이 될수 있고, B의 상태값은 C와 D에 관련 있는 상태값 일수 있다.<br>따라서, A의 상태 값은 B로 전달되어야하고 B의 상태값은 다시 C와 D에 전달되어야만 한다.<br>이렇게 A의 상태 변화 정보가 B에 전달되어야하고 B의 상태값이 다시 C와 D에 전달되어야하는 이유는 바로 A, B, C, D 모듈간에 <code>의존성</code>이 있기 때문이다.</p>
<p>간단한 예를 들어보자.<br>사용자 정보(상태)를 System 클래스가 check() 함수에서 사용하고 있는 예제이다.<br>System과 User간에는 다음과 같은 의존성이 존재한다.</p>
<img src="/blog/2017/07/26/rxjsbook2/A-B-use.png" title="B가 A를 사용하는 구조">

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="keyword">this</span>._state = &#123;</span><br><span class="line">      name: <span class="string">"손찬욱"</span>,</span><br><span class="line">      isLogin: <span class="literal">false</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  getName() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>._state.name;</span><br><span class="line">  &#125;</span><br><span class="line">  isLogin() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>._state.isLogin;</span><br><span class="line">  &#125;</span><br><span class="line">  login(name) &#123;</span><br><span class="line">    <span class="keyword">this</span>._state.name = name;</span><br><span class="line">    <span class="keyword">this</span>._state.isLogin = <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  logout() &#123;</span><br><span class="line">    <span class="keyword">this</span>._state.name = <span class="string">""</span>;</span><br><span class="line">    <span class="keyword">this</span>._state.isLogin = <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">System</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(user) &#123;</span><br><span class="line">    <span class="keyword">this</span>._token = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">this</span>._id = <span class="string">"System"</span>;</span><br><span class="line">    <span class="keyword">this</span>._user = user;</span><br><span class="line">  &#125;</span><br><span class="line">  check() &#123;</span><br><span class="line">    <span class="keyword">const</span> username = <span class="keyword">this</span>._user.getName();</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>._user.isLogin()) &#123;</span><br><span class="line">      <span class="keyword">this</span>._token = [...username].reduce(<span class="function">(<span class="params">acc, v</span>) =&gt;</span> acc + v.charCodeAt(<span class="number">0</span>), <span class="number">0</span>);</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">`[<span class="subst">$&#123;<span class="keyword">this</span>._id&#125;</span>] <span class="subst">$&#123;username&#125;</span> 의 토큰은 <span class="subst">$&#123;<span class="keyword">this</span>._token&#125;</span> 입니다`</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">this</span>._token = <span class="literal">null</span>;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">`[<span class="subst">$&#123;<span class="keyword">this</span>._id&#125;</span>] 로그인 되지 않았습니다`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> user = <span class="keyword">new</span> User();</span><br><span class="line"><span class="keyword">let</span> system = <span class="keyword">new</span> System(user);</span><br><span class="line"></span><br><span class="line"><span class="comment">// System 작업</span></span><br><span class="line">system.check(); <span class="comment">// [System] 로그인 되지 않았습니다</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// User의 상태변화 발생</span></span><br><span class="line">user.login(<span class="string">"sculove"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// System 작업</span></span><br><span class="line">system.check(); <span class="comment">// [System] sculove 의 토큰은 769 입니다</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// User의 상태변화 발생</span></span><br><span class="line">user.logout();</span><br><span class="line"></span><br><span class="line"><span class="comment">// System 작업</span></span><br><span class="line">system.check(); <span class="comment">// [System] 로그인 되지 않았습니다</span></span><br></pre></td></tr></table></figure>

<p>System은 User의 로그인 정보에 의해 System의 출력(상태)이 결정된다.</p>
<h2 id="웹어플리케이션의-상태변화로-인한-문제점"><a href="#웹어플리케이션의-상태변화로-인한-문제점" class="headerlink" title="웹어플리케이션의 상태변화로 인한 문제점."></a>웹어플리케이션의 상태변화로 인한 문제점.</h2><p>System과 User 코드는 굉장히 간단하면서도 훌륭한 예제이다. 하지만, 실프로젝트에서 사용된다면 많은 문제점이 발생할 수 있는 코드이다.</p>
<h3 id="첫째-User의-인터페이스가-변경되면-System도-함께-변경을-해주어야한다"><a href="#첫째-User의-인터페이스가-변경되면-System도-함께-변경을-해주어야한다" class="headerlink" title="첫째, User의 인터페이스가 변경되면, System도 함께 변경을 해주어야한다."></a>첫째, User의 인터페이스가 변경되면, System도 함께 변경을 해주어야한다.</h3><p>System에서는 user의 메소드인 getName, isLogin을 사용하고 있다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">System</span> </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  check() &#123;</span><br><span class="line">    <span class="keyword">const</span> username = <span class="keyword">this</span>._user.getName();</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>._user.isLogin()) &#123;</span><br><span class="line">      <span class="comment">// ...</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>위 코드는 작은 코드 조각이기 때문에, 크게 문제가 되지 않을수 있지만, 클래스의 크기가 커지면 커질수록 변경에 대한 영향도는 점점 커질 것이다.<br>뿐만 아니라, 지금은 System이 User를 사용하고 있는 상황이지만, 다른 클래스 A, B, C, … 등이 모두 User에 의존도를 가지고 있을 경우에는 더욱 더 변경에 대한 영향도는 커질 것이다.</p>
<h3 id="둘째-User-상태를-확인하기-위한-인터페이스에-대한-의사소통-비용이-발생한다"><a href="#둘째-User-상태를-확인하기-위한-인터페이스에-대한-의사소통-비용이-발생한다" class="headerlink" title="둘째, User 상태를 확인하기 위한 인터페이스에 대한 의사소통 비용이 발생한다."></a>둘째, User 상태를 확인하기 위한 인터페이스에 대한 의사소통 비용이 발생한다.</h3><p>User를 개발한 개발자와 User와 의존관계가 있는 class A, class B, class C,… 을 개발한 개발자 사이에는 의사소통에 따른 비용이 발생하게 된다.<br>지금은 User의 인터페이스가 getName, isLogin, login, logout 정도이지만, 인터페이스가 많아 질 경우 이에 대한 비용이 증가하게 될 것이다.</p>
<h3 id="셋째-다수의-클래스가-User에-의존-관계가-있는-경우라면-User의-변경여부를-반영하기-위해-다수의-클래스들이-직접-User의-상태를-모두-반영해야만-한다"><a href="#셋째-다수의-클래스가-User에-의존-관계가-있는-경우라면-User의-변경여부를-반영하기-위해-다수의-클래스들이-직접-User의-상태를-모두-반영해야만-한다" class="headerlink" title="셋째, 다수의 클래스가 User에 의존 관계가 있는 경우라면, User의 변경여부를 반영하기 위해 다수의 클래스들이 직접 User의 상태를 모두 반영해야만 한다."></a>셋째, 다수의 클래스가 User에 의존 관계가 있는 경우라면, User의 변경여부를 반영하기 위해 다수의 클래스들이 직접 User의 상태를 모두 반영해야만 한다.</h3><p>즉, 변경에 대한 전파가 원활하게 이루어지지 않는다.<br>이는 꽤나 번거로운 작업일 뿐만 아니라, User와 의존성이 있는 다수의 클래스들과의 의존 관계를 항상 염두에 두고 개발을 해야만 하기 때문에, 잦은 오류가 발생하기 쉽다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// User 상태변화 발생</span></span><br><span class="line">user.login(<span class="string">"sculove"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// User와 의존관계가 있는 classA</span></span><br><span class="line"><span class="comment">// User와 의존관계가 있는 classB</span></span><br><span class="line"><span class="comment">// User와 의존관계가 있는 classC</span></span><br><span class="line"><span class="comment">// User와 의존관계가 있는 classN ...</span></span><br><span class="line">classA.process();</span><br><span class="line">classB.process();</span><br><span class="line">classC.process();</span><br><span class="line">classN.process();</span><br></pre></td></tr></table></figure>

<h2 id="우리가-이미-알고-있는-솔루션-Observer-Pattern"><a href="#우리가-이미-알고-있는-솔루션-Observer-Pattern" class="headerlink" title="우리가 이미 알고 있는 솔루션 - Observer Pattern"></a>우리가 이미 알고 있는 솔루션 - Observer Pattern</h2><p>앞에서 이야기했던 문제점은 이미 우리가 익히 알고 있는 패턴으로 대부분 해결이 가능하다.<br>바로 <code>Observer Pattern</code>이다.<br>자 그럼 Observer Pattern에 대해 잠시 살펴보자.</p>
<h3 id="Loose-Coupling"><a href="#Loose-Coupling" class="headerlink" title="Loose Coupling"></a>Loose Coupling</h3><p>Observer Pattern에서는 상태가 변경될 대상을 Subject라고 한다. 그리고, 그 상태 변화를 관찰하는 대상을 Observer라고 한다.<br>Observer Pattern에서는 Subject와 Observer가 서로 느슨하게 연결되어 있다.<br>여기서 <code>느슨하게 연결되었다 (Loose Coupling)</code>는 의미는 Subject와 Observer가 서로 상호작용을 하지만, 서로 잘 모른다는 의미이다.<br>Subject가 Observer 에 대해서 아는 것은 Observer가 특정 인터페이스(update)를 구현한다는 것 뿐이다.<br>Observer는 언제든지 추가, 삭제할 수 있으며, 새로운 타입의 Observer를 추가하려고 해도 Subject를 변경할 필요가 전혀 없다.<br>또한, Subject와 Observer는 서로 독립적으로 사용이 가능하며, Observer 가 바뀌더라도 서로한테 영향을 미치지 않는다.</p>
<h3 id="자동-상태-전파"><a href="#자동-상태-전파" class="headerlink" title="자동 상태 전파"></a>자동 상태 전파</h3><p>기존 방식과 같이 데이터를 얻고자 하는 대상이 데이터를 직접 가져오는 방식은 매번 요청을 하여 변경 사항을 확인해야만 한다.<br>하지만 Observer Pattern은 이와 다르게 의존 관계의 대상(Subject)으로 부터 데이터를 제공 받는 방식이다.<br>전자의 경우를 <code>Pull</code> 방식이라고 후자를 <code>Push</code> 방식이라고 한다.</p>
<img src="/blog/2017/07/26/rxjsbook2/pull_push.png" title="Pull과 Push">

<p>Push 방식은 Pull 방식에 비해 상태 전파 문제를 효과적으로 처리 할 수 있다.<br>Push 방식으로 구성된 Observer Pattern은 Subject의 상태가 변경되었을 경우 관찰하는 Observer에게 자동으로 알려준다. 특히, Subject와 Observer가 1:n의 상황에서는 더욱 유효하다.<br>다수의 Observer를 Subject에 등록하기만하면 Subject의 변경사항이 등록된 다수의 Observer에게 자동으로 전달된다.<br>개발자는 데이터 변경 시점을 매번 확인할 필요도 없고 신경쓸 필요도 없다. 단지 변경되었다는 신호가 왔을 경우 처리만 해주면된다.</p>
<h3 id="인터페이스의-단일화"><a href="#인터페이스의-단일화" class="headerlink" title="인터페이스의 단일화"></a>인터페이스의 단일화</h3><p>앞에서 살펴본 바와 같이 인터페이스가 있다는 것은 많은 비용을 수반한다. 인터페이스가 증가 할때마다 개발자간의 의사소통 비용이 증가하고 변경 영향도도 커진다.<br>사실 이 문제는 인터페이스를 줄이는 것 만으로도 비용을 줄일 수 있다. 하지만 더욱 좋은 방법은 인터페이스가 있어도 없게 만드는 것이다. 어려운 이야기지만 사실 간단하다. <code>인터페이스를 특정 몇개로 통일하는 것이다.</code><br>모든 객체가 쓰는 인터페이스는 methodA, methodB, methodC 이다라고 정의하면 서로의 의사소통 비용이 줄어든다. 더불어, 변경사항이 생기더라도 영향도는 기존 보다 훨씬 작아진다.<br>Observer Pattern은 <code>Observer.update</code>만 존재하기 때문에 Subject에서는 Observer 인터페이스에 대한 별도의 비용이 존재하지 않는다.</p>
<h2 id="Observer-Pattern의-흔한-예"><a href="#Observer-Pattern의-흔한-예" class="headerlink" title="Observer Pattern의 흔한 예"></a>Observer Pattern의 흔한 예</h2><p>실제 Observer Pattern으로 작성된 예제를 통해 Observer Pattern을 이해해보자.<br>이런 Observer pattern의 가장 흔한 예로는 뉴스를 발행하는 신문사와 이를 구독하는 고객들이 있는 경우가 있다.</p>
<p>뉴스를 발행하는 신문사(Subject)는 고객들(Observer)를 등록하고, 신문이 발행될 때, 각각의 고객들에게 신문이 발행되었다고 알려준다.(notify)<br>각 고객들은 신문이 발행되었을때, 어떤 고객은 뉴스를 스크랩하거나, 어떤 고객은 뉴스를 읽기 시작한다.</p>
<p>이를 다이어그램으로 표현하면 다음과 같다.</p>
<img src="/blog/2017/07/26/rxjsbook2/observerpattern.png" title="Observer 패턴">

<p>이제 간단하게 코드로 작성해보자.</p>
<p>뉴스 정보를 저장하는 클래스를 작성해보자. 이 클래스는 뉴스 정보를 변경할 수 있는 setNews() 메소드를 제공한다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NewsPaper</span> </span>&#123;</span><br><span class="line">  setNews(news) &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>NewsPaper 클래스를 Subject 역할을 할수 있도록 구현해보자.<br>각각의 Observer를 등록, 삭제 할수 있는 add, remove 메소드를 추가하고,<br>상태 변경이 일어났을 때 각각 Observer의 update 메소드를 호출하는 notify 메소드를 추가하자.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NewsPaper</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="keyword">this</span>._observers = [];</span><br><span class="line">    &#125;</span><br><span class="line">    setNews(news) &#123;</span><br><span class="line">        <span class="keyword">this</span>.notify(news);</span><br><span class="line">    &#125;</span><br><span class="line">    add(observer) &#123;</span><br><span class="line">        <span class="keyword">this</span>._observers.push(observer);</span><br><span class="line">    &#125;</span><br><span class="line">    remove(observer) &#123;</span><br><span class="line">        <span class="keyword">let</span> idx = <span class="keyword">this</span>._observers.indexOf(observer);</span><br><span class="line">        <span class="keyword">if</span> (idx !== <span class="number">-1</span>) &#123;</span><br><span class="line">            <span class="keyword">this</span>._observers.splice(idx,<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    notify(news) &#123;</span><br><span class="line">        <span class="keyword">this</span>._observers.forEach( <span class="function"><span class="params">v</span> =&gt;</span> &#123;</span><br><span class="line">            v.update(news);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>이제는 뉴스를 구독하고자 하는 각각의 NewsScrapper와 NewsReader Obsever를 만들어보자.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NewsScrapper</span> </span>&#123;</span><br><span class="line">  update(news) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`뉴스를 스크랩하자 - <span class="subst">$&#123;news&#125;</span>`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NewsReader</span> </span>&#123;</span><br><span class="line">  update(news) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`뉴스를 읽자 - <span class="subst">$&#123;news&#125;</span>`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>자 이제 Observer Pattern을 이용하여 Subject와 Observer들을 만들어 보았다.<br>잘 동작하는지 확인해보자.</p>
<p>NewsPaper에 구독을 원하는 Observer(NewsScrapper, NewsReader)를 등록하고 NewsPaper의 setNews()를 통해 뉴스의 내용을 변경해보자.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> newsPaper = <span class="keyword">new</span> NewsPaper();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 구독하기</span></span><br><span class="line">newsPaper.add(<span class="keyword">new</span> NewsScrapper());</span><br><span class="line">newsPaper.add(<span class="keyword">new</span> NewsReader());</span><br><span class="line"></span><br><span class="line"><span class="comment">// 상태 변경</span></span><br><span class="line">newsPaper.setNews(<span class="string">"북한 미사일 발사!!!"</span>);</span><br><span class="line">newsPaper.setNews(<span class="string">"코스피 최저점 이탈!!!"</span>);</span><br><span class="line">newsPaper.setNews(<span class="string">"남북평화회담 성사"</span>);</span><br><span class="line">newsPaper.setNews(<span class="string">"남북통일"</span>);</span><br></pre></td></tr></table></figure>

<p>새로운 뉴스가 구독자들에게 잘 전달이 되는가?</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">뉴스를 스크랩하자 - 북한 미사일 발사!!!</span><br><span class="line">뉴스를 읽자 - 북한 미사일 발사!!!</span><br><span class="line">뉴스를 스크랩하자 - 코스피 최저점 이탈!!!</span><br><span class="line">뉴스를 읽자 - 코스피 최저점 이탈!!!</span><br><span class="line">뉴스를 스크랩하자 - 남북평화회담 성사</span><br><span class="line">뉴스를 읽자 - 남북평화회담 성사</span><br><span class="line">뉴스를 스크랩하자 - 남북통일</span><br><span class="line">뉴스를 읽자 - 남북통일</span><br></pre></td></tr></table></figure>

<p>상태 변경이 잘 전파되고 있다.<br>좋다.</p>
<h2 id="Observer-패턴-적용-하기"><a href="#Observer-패턴-적용-하기" class="headerlink" title="Observer 패턴 적용 하기"></a>Observer 패턴 적용 하기</h2><p>Observer 패턴을 우리가 고민했던 문제의 예제에 적용해보자.<br>상태 변화를 관찰할 User를 Subject로 만들고, System을 Observer로 변경해보자.</p>
<p>Subject는 각각의 Observer를 관리하는 기능 자제가 별도로 존재하기 때문에, 이를 상위 클래스로 만들고,<br>User를 하위 클래스로 변경해보자.</p>
<p>User의 상위 클래스로 사용될 Subject를 만들어보자.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Subject</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="keyword">this</span>._observers = [];</span><br><span class="line">  &#125;</span><br><span class="line">  add(observer) &#123;</span><br><span class="line">    <span class="keyword">this</span>._observers.push(observer);</span><br><span class="line">  &#125;</span><br><span class="line">  remove(observer) &#123;</span><br><span class="line">    <span class="keyword">let</span> idx = <span class="keyword">this</span>._observers.indexOf(observer);</span><br><span class="line">    <span class="keyword">if</span> (idx !== <span class="number">-1</span>) &#123;</span><br><span class="line">      <span class="keyword">this</span>._observers.splice(idx, <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  notify(status) &#123;</span><br><span class="line">    <span class="keyword">this</span>._observers.forEach(<span class="function"><span class="params">v</span> =&gt;</span> &#123;</span><br><span class="line">      v.update(status);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Subject를 User의 부모 클래스로 지정하고, Observer인 System은 User와의 의존 관계를 제거 한다.<br>check 메소드는 Subject로 부터 데이터를 전달받을 상태정보(status)를 파라미터로 받고, 메소드명을 update로 변경한다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">extends</span> <span class="title">Subject</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="keyword">this</span>._state = &#123;</span><br><span class="line">            name: <span class="string">"손찬욱"</span>,</span><br><span class="line">            isLogin: <span class="literal">false</span></span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">    getName() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>._state.name;</span><br><span class="line">    &#125;,</span><br><span class="line">    isLogin() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>._state.isLogin;</span><br><span class="line">    &#125;,</span><br><span class="line">    login(name) &#123;</span><br><span class="line">        <span class="keyword">this</span>._state.name = name;</span><br><span class="line">        <span class="keyword">this</span>._state.isLogin = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">this</span>.notify(<span class="keyword">this</span>._state);</span><br><span class="line">    &#125;,</span><br><span class="line">    logout() &#123;</span><br><span class="line">        <span class="keyword">this</span>._state.name = <span class="string">""</span>;</span><br><span class="line">        <span class="keyword">this</span>._state.isLogin = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">this</span>.notify(<span class="keyword">this</span>._state);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">System</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>() &#123;</span><br><span class="line">        <span class="keyword">this</span>._token = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">this</span>._id = <span class="string">"System"</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">    update(status) &#123;</span><br><span class="line">        <span class="keyword">if</span> (status.isLogin) &#123;</span><br><span class="line">            <span class="keyword">this</span>._token = <span class="built_in">Array</span>.prototype.reduce.call(</span><br><span class="line">                status.username,</span><br><span class="line">                (acc, v) =&gt; acc + v.charCodeAt(<span class="number">0</span>), <span class="number">0</span>);</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">`[<span class="subst">$&#123;<span class="keyword">this</span>._id&#125;</span>] <span class="subst">$&#123;status.username&#125;</span> 의 토큰은 <span class="subst">$&#123;<span class="keyword">this</span>._token&#125;</span> 입니다`</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">this</span>._token = <span class="literal">null</span>;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">`[<span class="subst">$&#123;<span class="keyword">this</span>._id&#125;</span>] <span class="subst">$&#123;status.username&#125;</span> 은(는) 로그인 되지 않았습니다`</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> user = <span class="keyword">new</span> User();</span><br><span class="line"><span class="keyword">let</span> system = <span class="keyword">new</span> System();</span><br><span class="line"></span><br><span class="line">user.add(system);</span><br><span class="line"></span><br><span class="line"><span class="comment">// User의 상태변화 발생</span></span><br><span class="line">user.login(<span class="string">"sculove"</span>);</span><br><span class="line">user.logout();</span><br><span class="line">user.login(<span class="string">"crazymonlong"</span>);</span><br></pre></td></tr></table></figure>

<p>System은 생성자에서 더이상 User의 인스턴스를 받지 않는다. 기존에 비해 의존성은 느슨해졌고 변경 상태도 의존성을 가진 모든 객체에 즉시 전파가 된다.</p>
<p>Login 클래스에 생성자의 파라미터로 구분자를 받는다면, 다수의 Login 모듈을 User에 등록하여 사용할 수도 있다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">System</span> </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="keyword">constructor</span>(id) &#123;</span><br><span class="line">    <span class="keyword">this</span>._id = id;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>이제는 User의 add를 통해 등록만 하면, User의 상태 변화를 모두 감지할 수 있다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> user = <span class="keyword">new</span> User();</span><br><span class="line"><span class="keyword">let</span> observer1 = <span class="keyword">new</span> System(<span class="string">"observer1"</span>);</span><br><span class="line"><span class="keyword">let</span> observer2 = <span class="keyword">new</span> System(<span class="string">"observer2"</span>);</span><br><span class="line"><span class="keyword">let</span> observer3 = <span class="keyword">new</span> System(<span class="string">"observer3"</span>);</span><br><span class="line"></span><br><span class="line">user.add(observer1);</span><br><span class="line">user.add(observer2);</span><br><span class="line">user.add(observer3);</span><br></pre></td></tr></table></figure>

<p>변경에 대한 인터페이스도 <code>update</code> 하나로 간결해졌다.</p>
<h2 id="RxJS는-무엇을-해결하고자-했는가"><a href="#RxJS는-무엇을-해결하고자-했는가" class="headerlink" title="RxJS는 무엇을 해결하고자 했는가?"></a>RxJS는 무엇을 해결하고자 했는가?</h2><p>RxJS는 상태 변화에 대한 문제를 Observer Pattern을 기반으로 해결하려고 하였다. 다만 기존 Observer Pattern에서 아쉬웠던 몇가지를 개선하였다.<br>앞에서 살펴본 <code>신문사와 구독자</code>의 예를 기준으로 살펴보자.</p>
<h3 id="RxJS가-개선하려고했던-Observer-Pattern"><a href="#RxJS가-개선하려고했던-Observer-Pattern" class="headerlink" title="RxJS가 개선하려고했던 Observer Pattern"></a>RxJS가 개선하려고했던 Observer Pattern</h3><h4 id="1-상태-변화는-언제-종료되는가"><a href="#1-상태-변화는-언제-종료되는가" class="headerlink" title="1. 상태 변화는 언제 종료되는가?"></a>1. 상태 변화는 언제 종료되는가?</h4><p>만약, 뉴스 서비스 종료로 더이상 뉴스를 전달하지 않게 되었다면 우리는 어떻게 구독자들(NewsScrapper, NewsReader)에게 이 내용을 전달할 수 있을까?<br>아마 다음과 같이 <code>뉴스서비스 종료</code>라는 특정 문자를 각 구독자들에게 보내고,<br>구독자는 <code>뉴스서비스 종료</code>라는 상태가 전달이 되면 <code>구독이 중지되었다</code>고 생각하고 별도의 처리를 해야만 한다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NewsScrapper</span> </span>&#123;</span><br><span class="line">  update(news) &#123;</span><br><span class="line">    <span class="keyword">if</span> (news === <span class="string">"뉴스서비스 종료"</span>) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">"뉴스 스크랩 서비스가 종료되었음"</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">`뉴스를 스크랩하자 - <span class="subst">$&#123;news&#125;</span>`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NewsReader</span> </span>&#123;</span><br><span class="line">  update(news) &#123;</span><br><span class="line">    <span class="keyword">if</span> (news === <span class="string">"뉴스서비스 종료"</span>) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">"뉴스 읽는 서비스가 종료되었음"</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">`뉴스를 읽자 - <span class="subst">$&#123;news&#125;</span>`</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// NewsScrapper 구독</span></span><br><span class="line">newsPaper.add(<span class="keyword">new</span> NewsScrapper());</span><br><span class="line"><span class="comment">// NewsReader 구독</span></span><br><span class="line">newsPaper.add(<span class="keyword">new</span> NewsReader());</span><br><span class="line"></span><br><span class="line"><span class="comment">// 상태 변경</span></span><br><span class="line">newsPaper.setNews(<span class="string">"북한 미사일 발사!!!"</span>);</span><br><span class="line"><span class="comment">//...</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 종료시</span></span><br><span class="line">newsPaper.setNews(<span class="string">"뉴스서비스 종료"</span>);</span><br></pre></td></tr></table></figure>

<p>이는 우리가 처음에 고민했던, 의사소통 비용에 대한 문제를 완벽하게 해결하지 못한 경우라고 이야기할 수 있다.<br>Observer Pattern은 상태를 전달하는 Subject의 데이터가 언제 종료되는지를 Observer들은 알 수가 없다.<br>이를 해결하기 위해서는 위와 같이 Observer와 Subject간에 별도의 규칙을 정해야만 한다. 결국 우린 또 다른 의사소통 비용을 쏟아야만하고, 결국 이런 의사소통의 산출물로 코드에 if문을 만들어야만 한다.<br>개발자로서 꽤 찝찝하고, 아쉬운 부분이다.</p>
<h4 id="2-상태-변화에서-에러가-발생하면"><a href="#2-상태-변화에서-에러가-발생하면" class="headerlink" title="2. 상태 변화에서 에러가 발생하면?"></a>2. 상태 변화에서 에러가 발생하면?</h4><p>프로그램에서 기능이 정상 동작하는 경우가 대다수이지만 꼭 고민해야할 부분 중의 하나가 바로 에러 처리이다.<br>프로그래머가 예측한 경우에 대한 에러 일수도 있고 예측 불가능한 에러 일 수도 있다.<br>하지만, 분명한 것은 우리가 개발한 서비스는 항상 정상적인 상황에서 돌아가지만은 않는다는 것이다.</p>
<p>NewsPaper의 setNews 메소드에서 다음과 같이 에러가 발생하게 되면 어떻게 될까?</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">setNews(news) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"NewsPaper Error"</span>); <span class="comment">// 에러 발생.</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.notify(news);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>우선, Subject 자체적으로 에러처리를 할 수 있다.<br>try-catch 문을 사용하면, 에러 발생 시 다시 한번 상태 변경을 시도 하거나, 상태 변경 작업 자체를 무시하는 등의 작업을 할 수 있다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">setNews(news) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"NewsPaper Error"</span>); <span class="comment">// 에러 발생.</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">this</span>.notify(news);</span><br><span class="line">    &#125; <span class="keyword">catch</span>(e) &#123;</span><br><span class="line">        <span class="comment">// 다시 시도~!</span></span><br><span class="line">        <span class="keyword">this</span>.notify(news);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>위와 같이 Subject 쪽에서 에러에 대한 처리를 별도로 하면, 등록된 Observer들은 상태 변경시 에러가 발생했는지 정상 동작했는지 모른다. 물론, 이 방법도 좋다.<br>하지만, 경우에 따라서는 등록된 Observer 쪽에서 에러 발생 여부를 인지하고, 이에 대한 별도의 처리를 해야하는 경우가 필요하다.<br>Observer 패턴은 update 인터페이스만을 통해서 Subject의 상태를 Observer에게 전달하기 때문에, 이 상황을 처리하기에는 어렵다.<br>아쉽지만, Observer 패턴은 에러 발생 여부를 Observer들에게 전달할 방법이 딱히 없다.</p>
<h4 id="3-Observer에-의해-Subject의-상태가-변경되는-경우는"><a href="#3-Observer에-의해-Subject의-상태가-변경되는-경우는" class="headerlink" title="3. Observer에 의해 Subject의 상태가 변경되는 경우는?"></a>3. Observer에 의해 Subject의 상태가 변경되는 경우는?</h4><p>신문사 기자이면서 동시에 구독자인 사람이 있는 경우라면 어떻게 될까?<br>만약 이 기자가 구독받은 기사의 내용을 조금 변경하여 다시 뉴스를 만드는 기레기 기자라면 우리는 생각보다 심각한 상황에 빠지게 된다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WriterAndReader</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(newsPaper) &#123;</span><br><span class="line">    <span class="keyword">this</span>._newPaper = newsPaper;</span><br><span class="line">  &#125;</span><br><span class="line">  update(news) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`전달 받은 뉴스 - <span class="subst">$&#123;news&#125;</span>`</span>);</span><br><span class="line">    <span class="keyword">this</span>._newPaper.setNews(<span class="string">`변형된 뉴스 - <span class="subst">$&#123;news&#125;</span>`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// WriterAndReader 구독</span></span><br><span class="line">newsPaper.add(<span class="keyword">new</span> WriterAndReader(newsPaper));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 상태 변경</span></span><br><span class="line">newsPaper.setNews(<span class="string">"북한 미사일 발사!!!"</span>);</span><br></pre></td></tr></table></figure>

<p>뉴스는 계속 반복적으로 생성되어 결국 브라우저는 뻗게 될 것이다.<br>이와 같이 Subject를 관찰하는 Observer가 Subject의 상태를 변경하는 경우에는 우리가 예상하지 못하는 복잡한 상황에 직면하게 될 수 있다.<br>이 예는 다소 과한 면이 있지만 우리가 프로그램을 하다보면 이렇게 데이터가 양방향으로 흐르게하는 경우가 종종 있다.<br>데이터의 흐름이 양방향으로 흐르게 함으로써 편한 면도 있지만 궁극적으로는 코드의 복잡도를 증가시키는 경우가 많다.</p>
<h2 id="RxJS는-어떻게-개선하였나"><a href="#RxJS는-어떻게-개선하였나" class="headerlink" title="RxJS는 어떻게 개선하였나?"></a>RxJS는 어떻게 개선하였나?</h2><p>RxJS 역시 Observer 패턴으로 상태 전달 문제를 해결하려고 하였다.</p>
<p>우선 RxJS에 녹아 있는 Observer 패턴을 살펴보자.<br>RxJS에서 전달되는 데이터는 모두 Observable 형태로 반환된다.<br>Observable은 <code>subscribe</code> 과정 후부터 데이터를 전달받기 시작한다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> click$ = Rx.Observable.fromEvent(<span class="built_in">document</span>, <span class="string">"click"</span>);</span><br><span class="line">click$.subscribe(<span class="function"><span class="params">v</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(v);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>반면, Observer 패턴에서는 Subject와 Observer가 <code>add</code> 과정 후 부터 데이터를 전달받기 시작한다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> newsPaper = <span class="keyword">new</span> Subject();</span><br><span class="line">newsPaper.add(&#123;</span><br><span class="line">  update: <span class="function"><span class="keyword">function</span>(<span class="params">v</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(v);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>둘의 관계는 닮았다. RxJS의 Observable은 Observer 패턴의 Suject와 닮았다.<br>그런데 Observer 패턴의 Observer에 해당하는 subscribe의 파라미터는 정작 객체가 아니라 함수이다.</p>
<p>이런 차이가 발생하게 된 배경은 RxJS가 기존 Observer 패턴의 아쉬웠던 점을 개선하고자 했기 때문이다.<br>RxJS가 개선한 Observer 패턴에 대해 살펴보도록 하자.</p>
<h3 id="RxJS가-개선한-Observer-Pattern"><a href="#RxJS가-개선한-Observer-Pattern" class="headerlink" title="RxJS가 개선한 Observer Pattern"></a>RxJS가 개선한 Observer Pattern</h3><h4 id="인터페이스의-확장"><a href="#인터페이스의-확장" class="headerlink" title="인터페이스의 확장"></a>인터페이스의 확장</h4><p>1장에서 살펴본 바와 같이 RxJS는 시간의 축으로 데이터를 보기 때문에 데이터의 연속적인 변화를 Observer에서 표현할수 있도록 기존 <code>update 메소드를 next로 바꾸었다.</code><br>또한 Observer 패턴은 종료시점, 에러시점에 대한 인터페이스가 존재하지 않기 때문에, 종료를 나타내는 <code>complete 메소드와 에러시점을 나타내는 error 메소드를 추가</code>하였다.</p>
<p>즉, Observer패턴에서는 하나의 메소드를 갖는 Observer를 사용하였다면 RxJS의 Observer는 next, complete, error의 3개 메소드를 갖는다. 그런데 객체가 아닌 왜 함수를 사용하는 것인가?<br>물론, Observable.subscribe는 다음과 같이 객체, 함수 모든 형태로든 다 전달 받을 수 있다.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> numbers$ = Rx.Observable.of([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// next, error, complete가 있는 객체를 받음</span></span><br><span class="line">numbers$.subscribe(&#123;</span><br><span class="line">  next(v) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(v);</span><br><span class="line">  &#125;,</span><br><span class="line">  error(e) &#123;</span><br><span class="line">    <span class="built_in">console</span>.error(e);</span><br><span class="line">  &#125;,</span><br><span class="line">  complete() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"complete"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// next 함수만 받음</span></span><br><span class="line">numbers$.subscribe(<span class="function"><span class="params">v</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(v);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// next, error 함수만 받음</span></span><br><span class="line">numbers$.subscribe(</span><br><span class="line">  v =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(v);</span><br><span class="line">  &#125;,</span><br><span class="line">  e =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.error(e);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// next, error, complete 함수를 받음</span></span><br><span class="line">numbers$.subscribe(</span><br><span class="line">  v =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(v);</span><br><span class="line">  &#125;,</span><br><span class="line">  e =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.error(e);</span><br><span class="line">  &#125;,</span><br><span class="line">  () =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"complete"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>하지만, RxJS의 subscribe는 특별한 경우를 제외하고는 가급적 함수 형태를 사용한다.<br>그 이유는 객체는 상태를 가질 수 있기 때문이다.<br>객체가 상태를 가진다는 의미는 또 다른 상태 머신이 될 수 있다는 의미이기도 하다. 반면 함수는 상태가 존재하지 않는 기능만을 담당하기 때문에 상태에 관한 문제에서는 보다 자유롭다.<br>이와 관련된 내용은 3장에서 다룰 <code>로직 오류에 대한 문제</code>에서 다시 한번 다루도록 하겠다.</p>
<h4 id="Observable은-Read-only"><a href="#Observable은-Read-only" class="headerlink" title="Observable은 Read-only"></a>Observable은 Read-only</h4><p>“기자이면서 구독자인 사례”와 같이 데이터가 양방향으로 흐르는 문제를 RxJS는 구조적으로 개선하려고 하였다.<br>Observable은 subscribe를 통해 데이터를 전달할 대상(Observer)에게 데이터를 전달할 수 있지만, 반대로 전달 대상(Observer)에게는 데이터를 전달할 수 없다. Observable은 전달하는 데이터를 설정할 수 있는 그 어떤 메소드도 제공하지 않는다. Observable은 데이터를 얻거나 변경 또는 머지만 할 수있을 뿐 데이터를 생성하지는 못한다. 즉, Observable에서 전달된 데이터는 <code>Observer 한 방향으로만 흐르게 된다</code></p>


<p>이렇게한 근본적인 이유는 데이터 흐름을 단순화함으로 복잡도를 낮추고 오류 발생 빈도를 줄이기 위해서 이다.<br>물론, 데이터가 양방향으로 흐르게 되면 사용상 편리할 수는 있다. 하지만, 어플리케이션의 규모가 커지게 되면 양방향으로 흐르는 데이터의 복잡도는 통제하기 어려울 정도로 복잡해진다.</p>
<p>이러한 이유로 최근 등장한 프레임워크들은 모두 <code>단방향 데이터 흐름</code>을 지향한다.</p>
<blockquote>
<p>React와 Angular2+, Vue 모두 단방향 데이터 흐름을 지향한다.</p>
</blockquote>
<h3 id="Observable은-리액티브하다"><a href="#Observable은-리액티브하다" class="headerlink" title="Observable은 리액티브하다."></a>Observable은 리액티브하다.</h3><p>RxJS는 Observer 패턴과 마찬가지로 데이터가 발생하게되면 Observer에게 자동으로 그리고 빠르게 변경된 데이터를 전달한다.<br>이를 보고 <code>리액티브하다</code>고 이야기한다.<br>리액티브하다라는 의미를 이해하기 위해서는 우선 리액티브 프로그래밍(Reactive Programming)에 대한 정의 부터 살펴보자. 위키피디아에서는 다음과 같이 정의되어 있다.</p>
<blockquote>
<p>리액티브 프로그래밍은 데이터 흐름과 상태 변화 전파에 중점을 둔 프로그램 패러다임이다. 사용되는 프로그래밍 언어에서 데이터 흐름을 쉽게 표현할 수 있어야하며 기본 실행 모델이 변경 사항을 데이터 흐름을 통해 자동으로 전파한다는 것을 의미한다.</p>
<p>출처 : <a href="https://en.wikipedia.org/wiki/Reactive_programming" rel="external nofollow noopener noreferrer" target="_blank">https://en.wikipedia.org/wiki/Reactive_programming</a></p>
</blockquote>
<p>위 정의에서 가장 핵심이 되는 단어는 <code>데이터 흐름</code>과 <code>자동으로 전파</code>이다. 즉, 상태 변화의 흐름이 자동으로 전파되는 것을 <code>리액티브</code>하다고 이야기한다.</p>
<p><code>리액티브</code>의 가장 흔하게 드는 예로 ‘엑셀’을 이야기할 수 있다.</p>


<p>A열의 값과 B열의 값의 합을 나타내는 C열은 A열이나 B열의 값이 변화되는 경우 자동으로 C열의 값이 변경된다.<br>이렇게 A나 B열의 변경사항이 데이터 흐름을 통해 자동으로 C열에 전파되도록 구조화하는 프로그래밍의 패러다임을 <code>리액티브 프로그래밍</code>이라고 한다.</p>
<p>이 말은 앞에서 살펴 보았던 상태 변화에 대한 우리의 고민들과 일맥 상통한다고 이야기할 수 있다.<br>이런 고민의 해결책이 Observer 패턴이고, RxJS는 이런 Observer 패턴을 개선하여 어플리케이션에서 발생하는 모든 데이터를 리액티브하게 전달 할 수 있게 해준다. 따라서, RxJS는 <code>리액티브 프로그래밍(Reactive Programming)</code>을 지향하는 라이브러리이다.</p>
<h2 id="정리"><a href="#정리" class="headerlink" title="정리"></a>정리</h2><p>이 장에서는 웹어플리케이션의 상태가 어떻게 전파되는지를 살펴 봄으로써 상태 전파로 인해 발생할 수 있는 문제점을 살펴보았다. 또한, 이러한 문제를 효과적으로 해결했던 Observer 패턴에 대해서도 살펴보았다.<br>Observer 패턴은 느슨하게 연결되어 Subject와 Observer간의 의존도를 줄였으며, Push 방식으로 데이터를 전파함으로써 상태 전파에 대한 많은 문제를 해결했다.<br>RxJS에서는 이런 Observer 패턴을 개선하여 상태 전파 문제를 해결하려고 하였다.<br>에러상황과 종료상황에 대한 인터페이스를 확장하였고, 데이터를 단방향으로 흐를 수 있도록 개선함으로써 코드의 복잡도를 낮추었다. 이런 결과 RxJS는 궁극적으로 Reactive Programming을 지향하는 라이브러리가 되었다.</p>
<p>다음장에서는 RxJS가 고민한 로직 오류에 대해 살펴보기로 하자.</p>

                    
                        

                    
                    
                        <p>
                            <a href="/blog/2017/07/26/rxjsbook2/#post-footer" class="postShorten-excerpt_link link">
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a class="link-unstyled" href="/blog/2016/06/22/Reactive-Programming/">
                            Reactive Programming
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2016-06-22T10:47:15+09:00">
	
		    Jun 22, 2016
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/blog/categories/Tech/">Tech</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="Reactive-Programming"><a href="#Reactive-Programming" class="headerlink" title="Reactive Programming"></a>Reactive Programming</h2><p>이 글은 기존에 잘 정리된 문서를 보고 학습한 결과를 바탕으로 제 기준으로 다시 간단히 정리한 문서입니다.</p>
<h2 id="Reactive-Programming-이란"><a href="#Reactive-Programming-이란" class="headerlink" title="Reactive Programming 이란?"></a>Reactive Programming 이란?</h2><img src="/blog/2016/06/22/Reactive-Programming/stream.png">

<h3 id="참조-문서"><a href="#참조-문서" class="headerlink" title="참조 문서"></a>참조 문서</h3><p><a href="https://gist.github.com/staltz/868e7e9bc2a7b8c1f754" rel="external nofollow noopener noreferrer" target="_blank">https://gist.github.com/staltz/868e7e9bc2a7b8c1f754</a></p>
<ul>
<li>Reactive Programming에 대한 설명과 예제를 다룬 글</li>
<li>이에 대한 egghead.io 강의 <a href="https://egghead.io/courses/introduction-to-reactive-programming" rel="external nofollow noopener noreferrer" target="_blank">https://egghead.io/courses/introduction-to-reactive-programming</a></li>
<li>Reactive Programming 개발 방법 익히기에 대해 정리한 어느 분의 문서<br><a href="http://mobicon.tistory.com/467" rel="external nofollow noopener noreferrer" target="_blank">http://mobicon.tistory.com/467</a></li>
</ul>
<h3 id="Reactive-Programming-1"><a href="#Reactive-Programming-1" class="headerlink" title="Reactive Programming"></a>Reactive Programming</h3><blockquote>
<p>Reactive programming is programming with asynchronous data streams.<br>You can listen to that stream and react accordingly.</p>
</blockquote>
<ul>
<li>Reactive Programing은 기본적으로 모든 것을 스트림(stream)으로 본다. 이벤트, ajax call, 등 모든 데이터의 흐름을 시간순서에 의해 전달되어지는 스트림으로 처리한다. 즉, 스트림이란, 시간순서에 의해 전달되어진 값들의 collection 정도로 이해해 보자.</li>
<li>각각의 스트림은 새로 만들어(branch)져서 새로운 스트림이 될 수도 있고, 여러개의 스트림이 합쳐(merge) 질수 도 있다.</li>
<li>스트림은 map, filter과 같은 함수형 메소드를 이용하여, immutable하게 처리할 수 있다.</li>
<li>스트림을 listening 함으로써 데이터의 결과값을 얻는다. 이를 subscribe라고 표현한다.</li>
</ul>
<img src="/blog/2016/06/22/Reactive-Programming/rxjs_stream.png">

<h3 id="Observable과-Observer"><a href="#Observable과-Observer" class="headerlink" title="Observable과 Observer"></a>Observable과 Observer</h3><blockquote>
<p>An observer subscribes to an Observable. An Observable emits items or sends notifications to its observers by calling the observers’ methods.<br><a href="http://reactivex.io/documentation/observable.html" rel="external nofollow noopener noreferrer" target="_blank">http://reactivex.io/documentation/observable.html</a></p>
</blockquote>
<ul>
<li>Observable은 observer의 메소드를 호출하면서 item이나 정보등을 호출(emit)하는 역할을 한다. Observer는 <code>onNext, onError, onCompleted</code>의 메소드가 구현되어 있다.</li>
<li>Observer는 observable을 subscribe한다. Observer는 Subscriber, watcher, reactor로 불려진다.</li>
</ul>
<h3 id="그럼-왜-Reactive-Programming-인가"><a href="#그럼-왜-Reactive-Programming-인가" class="headerlink" title="그럼 왜 Reactive Programming 인가?"></a>그럼 왜 Reactive Programming 인가?</h3><blockquote>
<p>Apps nowadays have an abundancy of real-time events of every kind that enable a highly interactive experience to the user. We need tools for properly dealing with that, and Reactive Programming is an answer.</p>
</blockquote>
<ul>
<li><p>함수형으로 만들기 때문에, 하나의 함수는 그 역할 자체에 집중할수 있다.</p>
</li>
<li><p>Promise의 장점을 극대화할 수 있다.<br>Reactive Programming에서 갑자기 Promise를 이야기하는 이유는, RxJS의 Observable이 Promise와 개념적으로 유사하다. 차이가 있다면, <code>Promise는 단 하나의 value를 다룰 수 있지만, Observable은 다수의 value를 다룰 수 있다.</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">myObservable.subscribe(successFn, errorFn);</span><br><span class="line">myPromise.then(successFn, errorFn);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>The Promise is an Observable<br>The Observable is not a Promise<br>ES7 스펙에 Observable이 제안되어 있지만 현재는 표준이 아니다. 하지만, Promise는 Promises/A+ 표준이다.</p>
</blockquote>
<p>처음 Promise를 접할 때에는 좀 낯설었지만, 실제 구현상의 편리함이나, 로직의 심플함, 비동기 처리를 동기식으로 개발할 수 있는 장점 덕분에, 좀더 알아먹기 쉬운 코딩을 할수 있다. 익숙해지면, Observable은 Promise보다 더 강력하다.</p>
</li>
<li><p>Observable은 A steam에 의해 B stream이 영향을 받는 경우, A만 바꿔도 B가 자동으로 바꿀 수 있도록 구성할 수 있어서, 데이터의 동기화를 간편하게 할 수 있다. 이러한 이유는 A와 B stream 사이의 관계를 <code>선언적</code>으로 선언했기 때문에 가능하다. <a href="https://jsbin.com/yikabo/3/edit?html,js,output" rel="external nofollow noopener noreferrer" target="_blank">[예제]</a></p>
</li>
</ul>
<h3 id="RxJS-참조-문서"><a href="#RxJS-참조-문서" class="headerlink" title="RxJS 참조 문서"></a>RxJS 참조 문서</h3><h4 id="ReactiveX-공식"><a href="#ReactiveX-공식" class="headerlink" title="ReactiveX 공식"></a>ReactiveX 공식</h4><p><a href="http://reactivex.io/" rel="external nofollow noopener noreferrer" target="_blank">http://reactivex.io/</a></p>
<h4 id="stream-생성-static-메소드"><a href="#stream-생성-static-메소드" class="headerlink" title="stream 생성 static 메소드"></a>stream 생성 static 메소드</h4><p><a href="https://github.com/Reactive-Extensions/RxJS/blob/master/doc/gettingstarted/which-static.md" rel="external nofollow noopener noreferrer" target="_blank">https://github.com/Reactive-Extensions/RxJS/blob/master/doc/gettingstarted/which-static.md</a></p>
<h4 id="stream-operator"><a href="#stream-operator" class="headerlink" title="stream operator"></a>stream operator</h4><p><a href="https://github.com/Reactive-Extensions/RxJS/blob/master/doc/gettingstarted/which-instance.md" rel="external nofollow noopener noreferrer" target="_blank">https://github.com/Reactive-Extensions/RxJS/blob/master/doc/gettingstarted/which-instance.md</a></p>
<h4 id="observable-api"><a href="#observable-api" class="headerlink" title="observable api"></a>observable api</h4><p><a href="https://github.com/Reactive-Extensions/RxJS/blob/master/doc/api/core/observable.md" rel="external nofollow noopener noreferrer" target="_blank">https://github.com/Reactive-Extensions/RxJS/blob/master/doc/api/core/observable.md</a></p>
<h4 id="operator-다이얼그램"><a href="#operator-다이얼그램" class="headerlink" title="operator 다이얼그램"></a>operator 다이얼그램</h4><p><a href="http://rxmarbles.com/" rel="external nofollow noopener noreferrer" target="_blank">http://rxmarbles.com/</a></p>
<h3 id="실습한-예제"><a href="#실습한-예제" class="headerlink" title="실습한 예제"></a>실습한 예제</h3><p>실습하면서 공부한 예제<br><a href="http://jsbin.com/pekemu/edit?js,console,output" rel="external nofollow noopener noreferrer" target="_blank">http://jsbin.com/pekemu/edit?js,console,output</a></p>
<h3 id="생각해볼-문제"><a href="#생각해볼-문제" class="headerlink" title="생각해볼 문제"></a>생각해볼 문제</h3><ul>
<li>map, filter와 같은 함수를 계속 쓰면, 객체를 계속 만드는 거 아닌가?<blockquote>
<p>RxJS는 <code>객체를 재활용함</code>. 문제없음. 음하하하</p>
<iframe src="https://www.slideshare.net/slideshow/embed_code/key/3sawQBCeBad7VI" width="100%" height="485px" frameborder="0" allowfullscreen></iframe>
<p>RxJS and Reactive Programming - Modern Web UI - May 2015 from Ben Lesh</p>
</blockquote>
</li>
<li>RxJS와 Reactive Programing은 같은 건가?<blockquote>
<p>아니, RxJS는 Reactive Programming에서 시간을 제어할 수 있는 Schedule 기능, 등이 포함되어 있는 라이브러리이다.</p>
</blockquote>
</li>
</ul>

                    
                        

                    
                    
                        <p>
                            <a href="/blog/2016/06/22/Reactive-Programming/#post-footer" class="postShorten-excerpt_link link">
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    <div class="pagination-bar">
    <ul class="pagination">
        
        
        <li class="pagination-number">page 1 of 1</li>
    </ul>
</div>

</section>


                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2019 sculove. All Rights Reserved.
    </span>
</footer>

            </div>
            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="/blog/assets/images/sculove.jpeg" alt="Author&#39;s picture">
        
            <h4 id="about-card-name">sculove</h4>
        
            <div id="about-card-bio"><p>아내와 아들 그리고 딸밖에 모르는 남편</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br>
                <p>FrontEnd Developer</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br>
                대한민국/서울
            </div>
        
    </div>
</div>

        
            <div id="algolia-search-modal" class="modal-container">
    <div class="modal">
        <div class="modal-header">
            <span class="close-button"><i class="fa fa-times"></i></span>
            <a href="https://algolia.com" target="_blank" rel="external nofollow noopener noreferrer" class="searchby-algolia text-color-light link-unstyled">
                <span class="searchby-algolia-text text-color-light text-small">by</span>
                <img class="searchby-algolia-logo" src="https://www.algolia.com/static_assets/images/press/downloads/algolia-light.svg">
            </a>
            <i class="search-icon fa fa-search"></i>
            <form id="algolia-search-form">
                <input type="text" id="algolia-search-input" name="search" class="form-control input--large search-input" placeholder="Search ">
            </form>
        </div>
        <div class="modal-body">
            <div class="no-result text-color-light text-center">no post found</div>
            <div class="results">
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://sculove.github.io/blog/2011/05/14/building-rich/">
                            <h3 class="media-heading">빌딩부자들</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    May 14, 2011
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://sculove.github.io/blog/2012/02/19/donot-speak-book/">
                            <h3 class="media-heading">뱀의 뇌에게 말을 걸지마라</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    Feb 19, 2012
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://sculove.github.io/blog/2012/02/29/manager-book/">
                            <h3 class="media-heading">만약 고교야구 여자 매니저가 피터드러커를 읽는다면</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    Feb 29, 2012
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://sculove.github.io/blog/2012/03/18/myjob-myhappy/">
                            <h3 class="media-heading">내가 하는 일 가슴 설레는 일</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    Mar 18, 2012
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://sculove.github.io/blog/2013/11/06/mobile-es5-compatiable/">
                            <h3 class="media-heading">모바일 브라우저 ECMAScript5 지원 현황</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    Nov 6, 2013
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://sculove.github.io/blog/2013/12/05/animation-for-performance/">
                            <h3 class="media-heading">애니메이션 성능을 높이는 방법</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    Dec 5, 2013
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://sculove.github.io/blog/2014/11/19/How-to-make-a-smooth-animation/">
                            <h3 class="media-heading">How to Make a Smooth Animation</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    Nov 19, 2014
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://sculove.github.io/blog/2015/01/16/angular1-for-performance/">
                            <h3 class="media-heading">AngularJS 성능 이슈에 대한 이야기</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    Jan 16, 2015
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://sculove.github.io/blog/2015/09/03/Ftp-settings-in-OSX/">
                            <h3 class="media-heading">Anonymous FTP Settings in OSX</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    Sep 3, 2015
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
                <div class="media">
                    
                    <div class="media-body">
                        <a class="link-unstyled" href="http://sculove.github.io/blog/2015/09/03/Apache2-settings-in-OSX/">
                            <h3 class="media-heading">Apache2 Settings in OSX</h3>
                        </a>
                        <span class="media-meta">
                            <span class="media-date text-small">
                                
                                    Sep 3, 2015
                                
                            </span>
                        </span>
                        <div class="media-content hide-xs font-merryweather"></div>
                    </div>
                    <div style="clear:both;"></div>
                    <hr>
                </div>
                
            </div>
        </div>
        <div class="modal-footer">
            <p class="results-count text-medium" data-message-zero="no post found" data-message-one="1 post found" data-message-other="{n} posts found">
                67 posts found
            </p>
        </div>
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/blog/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->
<script src="/blog/assets/js/jquery.js"></script>
<script src="/blog/assets/js/jquery.fancybox.js"></script>
<script src="/blog/assets/js/thumbs.js"></script>
<script src="/blog/assets/js/tranquilpeak.js"></script>
<!--SCRIPTS END-->


    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.14.1/moment-with-locales.min.js"></script>
    <script src="//cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
    <script>
        var algoliaClient = algoliasearch('0E46FZ0JA2', '01370395a4f67d606d12d489c615c822');
        var algoliaIndex = algoliaClient.initIndex('sculove.github.io');
    </script>


    </body>
</html>
